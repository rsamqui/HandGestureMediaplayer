# Gesture Controlled Spotify Player ü§òüéß

Controla tu reproducci√≥n de Spotify usando gestos de la mano detectados en tiempo real a trav√©s de tu c√°mara web. Este proyecto utiliza Python, MediaPipe para el seguimiento de manos, OpenCV para el manejo de la c√°mara y Spotipy para la interacci√≥n con la API de Spotify.

## ‚ú® Caracter√≠sticas

* **Control de Reproducci√≥n:** Play/Pausa, Siguiente Canci√≥n, Canci√≥n Anterior.
* **Control de Volumen:** Subir y Bajar Volumen.
* **Interacci√≥n con Biblioteca:** Dar "Me Gusta" y Quitar "Me Gusta" a canciones.
* **Informaci√≥n Adicional:** Abrir una b√∫squeda de letras de la canci√≥n actual en el navegador.
* **Feedback Visual:** Muestra los puntos de referencia de la mano y el estado actual del cooldown/gesto detectado (opcional, seg√∫n la √∫ltima versi√≥n del script).
* **Cooldown Personalizable:** Diferentes tiempos de espera entre comandos seg√∫n la acci√≥n realizada.

## üõ†Ô∏è Tecnolog√≠as Utilizadas

* **Python 3.10.x**
* **MediaPipe:** Para la detecci√≥n de manos y sus puntos de referencia.
* **OpenCV (cv2):** Para la captura y procesamiento de video de la c√°mara web.
* **Spotipy:** Para interactuar con la API Web de Spotify (controlar reproducci√≥n, dar "Me Gusta", etc.).
* **os:** Para manejar variables de entorno (credenciales de Spotify).
* **math:** Para c√°lculos matem√°ticos (ej. distancias).
* **webbrowser, urllib.parse:** Para abrir el navegador y buscar letras.

## üöÄ Configuraci√≥n e Instalaci√≥n

Sigue estos pasos para poner en marcha el proyecto:

1.  **Clonar el Repositorio:**
    ```bash
    git clone [https://github.com/rsamqui/HandGestureMediaplayer.git](https://github.com/rsamqui/HandGestureMediaplayer.git)
    cd HandGestureMediaplayer
    ```

2.  **Crear un Entorno Virtual (Recomendado):**
    ```bash
    python -m venv venv
    # En Windows
    venv\Scripts\activate
    # En macOS/Linux
    source venv/bin/activate
    ```

3.  **Instalar Dependencias:**
    Aseg√∫rate de tener `pip` actualizado. Puedes crear un archivo `requirements.txt` con las siguientes l√≠neas:
    ```txt
    opencv-python
    mediapipe
    spotipy
    ```
    Y luego instalar con:
    ```bash
    pip install -r requirements.txt
    ```
    O instalar individualmente:
    ```bash
    pip install opencv-python mediapipe spotipy
    ```

4.  **Configurar la Aplicaci√≥n de Spotify Developer:**
    * Ve al [Dashboard de Desarrolladores de Spotify](https://developer.spotify.com/dashboard/).
    * Crea una nueva aplicaci√≥n (o usa una existente).
    * Copia tu `Client ID` y `Client Secret`.
    * En la configuraci√≥n de tu aplicaci√≥n de Spotify, a√±ade un **Redirect URI**. Para este proyecto, usa: `http://127.0.0.1:8888/callback`

5.  **Establecer Variables de Entorno (Recomendado y m√°s seguro):**
    Establece las siguientes variables de entorno en tu sistema:
    ```bash
    SPOTIPY_CLIENT_ID="TU_CLIENT_ID"
    SPOTIPY_CLIENT_SECRET="TU_CLIENT_SECRET"
    SPOTIPY_REDIRECT_URI="[http://127.0.0.1:8888/callback](http://127.0.0.1:8888/callback)"
    ```
    Alternativamente, puedes modificar directamente estas variables en el script `mediaplayer_gestures.py` (menos seguro):
    ```python
    # Dentro de mediaplayer_gestures.py
    os.environ["SPOTIPY_CLIENT_ID"] = "TU_CLIENT_ID_AQU√ç"
    os.environ["SPOTIPY_CLIENT_SECRET"] = "TU_CLIENT_SECRET_AQU√ç"
    os.environ["SPOTIPY_REDIRECT_URI"] = "[http://127.0.0.1:8888/callback](http://127.0.0.1:8888/callback)"
    ```

6.  **Verificar los Permisos (Scopes) de Spotify:**
    Aseg√∫rate de que la variable `SCOPE` en tu script `mediaplayer_gestures.py` incluya todos los permisos necesarios. Para la funcionalidad completa que hemos desarrollado, deber√≠a ser:
    ```python
    SCOPE = "user-modify-playback-state user-read-playback-state user-library-modify"
    ```

## ‚ñ∂Ô∏è C√≥mo Usar

1.  Aseg√∫rate de que Spotify est√© abierto y reproduciendo m√∫sica en alguno de tus dispositivos (Desktop, Web Player, etc.).
2.  Activa tu entorno virtual (si creaste uno).
3.  Ejecuta el script principal:
    ```bash
    python mediaplayer_gestures.py
    ```
4.  **Autenticaci√≥n Inicial:** La primera vez que ejecutes el script (o si cambias los `SCOPES` o borras el archivo `.cache`), se abrir√° una pesta√±a en tu navegador pidi√©ndote que autorices la aplicaci√≥n. Inicia sesi√≥n y acepta los permisos. Luego, copia la URL completa de la barra de direcciones (la que empieza con `http://127.0.0.1...`) y p√©gala en la terminal cuando se te solicite.
5.  ¬°Empieza a controlar Spotify con tus gestos! Una ventana de OpenCV mostrar√° la imagen de tu c√°mara.

## üñêÔ∏è Tabla de Gestos y Acciones

| Gesto                                           | Acci√≥n             | Descripci√≥n Detallada                                      |
| :---------------------------------------------- | :----------------- | :--------------------------------------------------------- |
| **Mano Abierta** | Siguiente Canci√≥n  | Los 4 dedos principales extendidos, pulgar no interfiere    |
| **Shaka (Pulgar y Me√±ique arriba)** | Canci√≥n Anterior   | √çndice, coraz√≥n y anular cerrados, pulgar y me√±ique arriba |
| **"Paz/Victoria" (√çndice y Coraz√≥n arriba)** | Play/Pausa         | Anular y me√±ique cerrados, pulgar no arriba                |
| **OK Sign** | Dar "Me Gusta"     | Punta del pulgar toca punta del √≠ndice, otros 3 extendidos |
| **Forma de "L" (Pulgar e √çndice arriba)** | Quitar "Me Gusta"  | Coraz√≥n, anular y me√±ique cerrados                         |
| **√çndice, Coraz√≥n y Me√±ique arriba** | Subir Volumen      | Anular cerrado, pulgar no interfiere                       |
| **"Rock" (√çndice y Me√±ique arriba)** | Bajar Volumen      | Coraz√≥n y anular cerrados, pulgar no interfiere            |
| **√çndice Arriba (solo)** | Mostrar Letras     | Otros 3 dedos cerrados, pulgar cerrado o no arriba         |

*(Nota: La fiabilidad de la detecci√≥n de gestos puede variar seg√∫n la iluminaci√≥n, el fondo y la claridad con la que se realice el gesto. Intenta hacer los gestos de forma clara frente a la c√°mara.)*

## ‚ùó Soluci√≥n de Problemas Comunes

* **Error `403 Insufficient client scope` al dar "Me Gusta" / "Quitar Me Gusta":**
    * Aseg√∫rate de que el `SCOPE` en tu script incluye `user-library-modify`.
    * **Borra el archivo `.cache`** (o `.cache-TU_USUARIO_SPOTIFY`) en la carpeta de tu script.
    * Re-ejecuta el script. Te pedir√° autenticarte de nuevo en el navegador. Aseg√∫rate de aceptar los nuevos permisos.
    * Para forzar la pantalla de di√°logo de Spotify durante la autenticaci√≥n (√∫til para depurar), puedes a√±adir `show_dialog=True` al constructor de `SpotifyOAuth`: `auth_manager=SpotifyOAuth(scope=SCOPE, show_dialog=True)`
* **Gestos no detectados o detectados incorrectamente:**
    * Asegura una buena iluminaci√≥n y un fondo relativamente simple.
    * Mant√©n una distancia adecuada a la c√°mara.
    * Realiza los gestos de forma clara y definida.
    * Puedes ajustar los umbrales (`min_detection_confidence`, `min_tracking_confidence` en `mp_hands.Hands()`) o la l√≥gica dentro de `recognize_gesture()` si es necesario.
    * Los umbrales de distancia (`OPEN_THRESHOLD`, `OK_THRESHOLD`) en `recognize_gesture()` pueden necesitar ajuste fino.
* **No se detectan dispositivos Spotify:** Aseg√∫rate de que Spotify est√© abierto y activo en alg√∫n dispositivo antes de ejecutar el script.

## üîÆ Mejoras Futuras Posibles

* Interfaz Gr√°fica de Usuario (GUI) en lugar de solo la ventana de OpenCV.
* M√°s gestos y acciones personalizables.
* Opci√≥n para elegir qu√© reproductor controlar (no solo Spotify).
* Mejorar la robustez del reconocimiento de gestos (quiz√°s con modelos de ML entrenados).
* Empaquetar como una aplicaci√≥n ejecutable.
---

¬°Disfruta controlando tu m√∫sica con el poder de tus manos!